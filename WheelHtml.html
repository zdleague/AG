<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vertical Wheel from Google Sheets</title>
  <style>
    body {
  background: #222;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  perspective: 1000px; /* ðŸ‘ˆ This enables 3D */
}

#wheel-container {
  width: 400px;
  height: 400px;
  position: relative;
  transform-style: preserve-3d;
}

#wheel {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 8px solid #fff;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
  background: conic-gradient(
    red 0deg 90deg,
    yellow 90deg 180deg,
    green 180deg 270deg,
    blue 270deg 360deg
  );
  transition: transform 5s cubic-bezier(0.25, 1, 0.5, 1);
  transform-origin: center center;
}

    .item {
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 1px solid #444;
      background: #222;
    }
    .indicator {
      position: absolute;
      top: 120px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 2em;
      color: red;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="indicator">â–¼</div>
  <div id="wheel-container">
    <div id="wheel"></div>
  </div>

  <script>
    const wheel = document.getElementById('wheel');
    let options = [];

    const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQs-Szpo_J6BXehkgdXROIt99TcipqnMHCizMdkpMJ2-Ag2mY_C_n1j2Ij-OekVbLTrmarwt4m6b-6p/pub?output=csv';

    async function loadOptionsFromSheet() {
      try {
        const res = await fetch(sheetURL);
        const text = await res.text();
        options = text
          .split('\n')
          .map(line => line.trim())
          .filter(line => line.length > 0);
        buildWheel();
      } catch (err) {
        console.error("Error loading Google Sheet:", err);
        options = ["Error loading sheet"];
        buildWheel();
      }
    }

    function buildWheel() {
      wheel.innerHTML = '';
      options.forEach(option => {
        const div = document.createElement('div');
        div.className = 'item';
        div.textContent = option;
        wheel.appendChild(div);
      });
    }

    function spinWheel() {
      if (options.length === 0) return;
      const randomIndex = Math.floor(Math.random() * options.length);
      const offset = 60 * randomIndex;
      wheel.style.transform = `rotateY(${total}deg)`;
    }

    // Trigger from Mix It Up
    window.addEventListener("message", (event) => {
      console.log("Received message:", event.data);
      if (event.data === "spin") {
        spinWheel();
      }
    });


    // Optional: click to test
    document.body.addEventListener("click", spinWheel);

    loadOptionsFromSheet();
  </script>
</body>
</html>
